<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>SV CHALLENGE LIST</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dark-mode.css">
    <link rel="stylesheet" href="mobile-optimized.css">
    <style>
        @keyframes gradientMove {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }
    </style>
</head>
<!-- Charger les adaptateurs de stockage (localStorage uniquement) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="storage-adapter.js"></script>
<script src="supabase-config.js"></script>

<body>
    <header>
        <div class="header-content">
            <h1>SV CHALLENGE LIST</h1>
            <div class="header-links">
                <a href="leaderboard.html" class="link-leaderboard">ğŸ† Classements</a>
                <a href="clans-ranking.html" class="link-clans-ranking">ğŸ›¡ï¸ Clans</a>
                <a href="submission.html" class="link-submit">ğŸ“ Soumettre un niveau</a>
                <a href="auth.html" class="link-account">ğŸ‘¤ Compte</a>
                <a href="admin.html" class="link-admin">ğŸ‘¨â€ğŸ’¼ Admin</a>
            </div>
            <div class="stats">
                <div class="stat">
                    <span class="stat-number" id="levelCount">13</span>
                    <span class="stat-label">Niveaux</span>
                </div>
                <div class="stat">
                    <span class="stat-number" id="recordCount">42</span>
                    <span class="stat-label">Records</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Meilleur Clan -->
            <div id="topClanCard" style="display: none; margin-bottom: 24px;">
                <div
                    style="position: relative; padding: 24px 28px; border-radius: 20px; background: linear-gradient(135deg, #ff0080, #7928ca, #2afadf); background-size: 300% 300%; animation: gradientMove 8s ease infinite; box-shadow: 0 0 40px rgba(255, 0, 128, 0.4), 0 0 80px rgba(42, 250, 223, 0.25); overflow: hidden;">
                    <div
                        style="position: absolute; top: -18px; right: -18px; background: #ffd700; color: #000; font-size: 32px; font-weight: 900; width: 72px; height: 72px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);">
                        #1</div>
                    <div style="position: relative; z-index: 2;">
                        <h3
                            style="text-transform: uppercase; font-size: 12px; letter-spacing: 2px; opacity: 0.85; margin-bottom: 6px;">
                            ğŸ›¡ï¸ Meilleur Clan</h3>
                        <div id="topClanName"
                            style="font-size: 28px; font-weight: 800; text-shadow: 0 0 20px rgba(255, 255, 255, 0.6); margin-bottom: 12px;">
                            [TAG] Nom du Clan</div>
                        <div id="topClanStats" style="display: flex; gap: 20px; flex-wrap: wrap; font-size: 14px;">
                            <span>ğŸ”¥ Points : <strong>0</strong></span>
                            <span>ğŸ‘¥ Membres : <strong>0</strong></span>
                            <span>ğŸ† Records : <strong>0</strong></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Meilleur Joueur -->
            <div id="topPlayerCard" style="display: none; margin-bottom: 24px;">
                <div
                    style="position: relative; padding: 24px 28px; border-radius: 20px; background: linear-gradient(135deg, #00d4ff, #0099ff, #6a5acd); background-size: 300% 300%; animation: gradientMove 8s ease infinite; box-shadow: 0 0 40px rgba(0, 212, 255, 0.4), 0 0 80px rgba(106, 90, 205, 0.25); overflow: hidden;">
                    <div
                        style="position: absolute; top: -18px; right: -18px; background: #ffd700; color: #000; font-size: 32px; font-weight: 900; width: 72px; height: 72px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);">
                        #1</div>
                    <div style="position: relative; z-index: 2;">
                        <h3
                            style="text-transform: uppercase; font-size: 12px; letter-spacing: 2px; opacity: 0.85; margin-bottom: 6px;">
                            â­ Meilleur Joueur</h3>
                        <div id="topPlayerName"
                            style="font-size: 28px; font-weight: 800; text-shadow: 0 0 20px rgba(255, 255, 255, 0.6); margin-bottom: 12px;">
                            Joueur</div>
                        <div id="topPlayerStats" style="display: flex; gap: 20px; flex-wrap: wrap; font-size: 14px;">
                            <span>ğŸ”¥ Points : <strong>0</strong></span>
                            <span>ğŸ¯ Niveaux : <strong>0</strong></span>
                            <span>ğŸ† Records : <strong>0</strong></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtres -->
            <div class="filters">
                <div class="filter-group">
                    <label for="difficulty-filter">DifficultÃ©:</label>
                    <select id="difficulty-filter">
                        <option value="">Tous</option>
                        <option value="Extreme Demon">Extreme Demon</option>
                        <option value="Insane Demon">Insane Demon</option>
                        <option value="Hard Demon">Hard Demon</option>
                        <option value="Medium Demon">Medium Demon</option>
                        <option value="Easy Demon">Easy Demon</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="length-filter">Longueur:</label>
                    <select id="length-filter">
                        <option value="">Tous</option>
                        <option value="Tiny">Tiny</option>
                        <option value="Short">Short</option>
                        <option value="Medium">Medium</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="tag-filter">Tag:</label>
                    <select id="tag-filter">
                        <option value="">Tous</option>
                        <option value="wave">ğŸŒŠ Wave</option>
                        <option value="ship">ğŸš€ Ship</option>
                        <option value="overall">ğŸ„ Overall</option>
                        <option value="timing">â±ï¸ Timing</option>
                        <option value="vitesse">âš¡ Vitesse</option>
                    </select>
                </div>
                <div class="filter-group">
                    <input type="text" id="search-input" placeholder="Rechercher un niveau...">
                </div>
            </div>

            <!-- Liste des niveaux -->
            <div class="levels-list" id="levelsList">
                <!-- Les niveaux seront gÃ©nÃ©rÃ©s par JavaScript -->
            </div>
        </div>
    </main>

    <footer>
        <p>SV Challenge List - CrÃ©Ã© par Spleen</p>
    </footer>

    <script src="badge-particles.js"></script>
    <script src="data-sync.js"></script>
    <script src="script.js"></script>
    <script src="submission.js"></script>
    <script src="record-submission.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Activer Supabase
            if (typeof enableSupabaseStorage === 'function') {
                try {
                    await enableSupabaseStorage();
                    console.log('âœ… Supabase activÃ© (pages publiques)');

                    // Charger les donnÃ©es depuis Supabase dans le cache
                    if (typeof universalStorage !== 'undefined') {
                        await universalStorage.getData('svChallengeSubmissions');
                        await universalStorage.getData('svChallengeRecordSubmissions');
                    }
                } catch (err) {
                    console.error('âŒ Activation Supabase Ã©chouÃ©e, fallback localStorage', err);
                }
            }

            // Toujours charger les niveaux
            if (typeof initializeLevels === 'function') {
                await initializeLevels();
            }
        });
    </script>
    <script src="dark-mode.js"></script>
</body>

</html>