<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compte - SV Challenge</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mobile-optimized.css">
    <link rel="stylesheet" href="dark-mode.css">
    <style>
        .auth-page {
            max-width: 520px;
            margin: 0 auto;
            color: #f2f4fb;
        }

        .card {
            background: #1f2430;
            border: 1px solid #2b3240;
            border-radius: 8px;
            padding: 16px;
        }

        .card h2 {
            margin-top: 0;
        }

        .row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .row input {
            flex: 1 1 180px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn:hover {
            background: #5568d3;
        }

        .muted {
            color: #9aa2b5;
            font-size: 0.9em;
        }

        .error {
            color: #ff8c8c;
            font-size: 0.9em;
        }

        .success {
            color: #7ee0a3;
            font-size: 0.9em;
        }

        label {
            display: block;
            margin-top: 8px;
            margin-bottom: 4px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="auth.js"></script>
</head>

<body>
    <header>
        <div class="header-content">
            <h1>Compte</h1>
            <div class="header-links">
                <a href="index.html">‚Üê Retour</a>
                <a href="clans.html">üõ°Ô∏è Clans</a>
            </div>
        </div>
    </header>
    <main class="auth-page">
        <div class="card">
            <h2>Connexion / Inscription</h2>
            <div class="row">
                <input type="email" id="authEmail" placeholder="Email">
                <input type="password" id="authPassword" placeholder="Mot de passe">
            </div>
            <div style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;">
                <button class="btn" id="loginBtn">Se connecter</button>
                <button class="btn" id="signupBtn" style="background:#4caf50;">Cr√©er un compte</button>
                <button class="btn" id="logoutBtn" style="background:#ff6b6b; display:none;">Se d√©connecter</button>
            </div>
            <div id="authStatus" class="muted" style="margin-top:8px;"></div>
            <div id="authError" class="error"></div>
            <div style="margin-top:12px; text-align: center;">
                <a href="user-reset-password.html" style="color: #667eea; text-decoration: none; font-size: 0.9em;">Mot
                    de passe oubli√© ?</a>
            </div>
        </div>

        <div class="card" style="margin-top:16px;">
            <h2>Profil</h2>
            <label for="username">Pseudo</label>
            <input type="text" id="username" placeholder="Pseudo">
            <label for="country">Pays</label>
            <input type="text" id="country" placeholder="Ex: France">
            <label for="avatar">Avatar</label>
            <input type="file" id="avatarFile" accept="image/*">
            <div class="muted" style="font-size:0.85em; margin-top:4px;">Ou URL:</div>
            <input type="url" id="avatar" placeholder="https://...">
            <div style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;">
                <button class="btn" id="saveProfileBtn">Enregistrer</button>
            </div>
            <div id="profileMsg" class="muted" style="margin-top:8px;"></div>
        </div>

        <!-- Section Changement de mot de passe -->
        <div class="card" style="margin-top:16px;">
            <h2>üîë Changer mon mot de passe</h2>
            <label for="userCurrentPassword">Mot de passe actuel</label>
            <input type="password" id="userCurrentPassword" placeholder="Mot de passe actuel"
                autocomplete="current-password">
            <label for="userNewPassword">Nouveau mot de passe</label>
            <input type="password" id="userNewPassword" placeholder="Nouveau mot de passe (min. 6 caract√®res)"
                autocomplete="new-password" minlength="6">
            <label for="userConfirmPassword">Confirmer le nouveau mot de passe</label>
            <input type="password" id="userConfirmPassword" placeholder="Confirmer le nouveau mot de passe"
                autocomplete="new-password" minlength="6">
            <div style="margin-top:8px;">
                <button class="btn" id="changePasswordBtn">Changer le mot de passe</button>
            </div>
            <div id="passwordChangeMsg" class="muted" style="margin-top:8px;"></div>
        </div>
    </main>
    <script src="account.js"></script>
    <script src="user-password-change.js"></script>
    <div id="page-transition"></div>
    <script src="page-transition.js"></script>

</body>

</html>